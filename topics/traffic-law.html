<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Texas Transportation Code Study Guide</title>
    <link rel="stylesheet" href="../dist/output.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        details > summary { 
            cursor: pointer;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
            font-weight: 600;
        }
        details > summary:hover {
            background-color: #f8fafc;
        }
        details[open] > summary {
            background-color: #f1f5f9;
        }
        
        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 1rem !important;
            }
            
            h1 {
                font-size: 2rem !important;
            }
            
            h2 {
                font-size: 1.5rem !important;
            }
            
            h3 {
                font-size: 1.25rem !important;
            }
            
            /* Improve touch targets for mobile */
            details > summary {
                padding: 1rem;
                font-size: 1.1rem;
                min-height: 48px;
                display: flex;
                align-items: center;
            }
            
            /* Better spacing for mobile */
            .space-y-8 > * + * {
                margin-top: 1.5rem !important;
            }
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <div class="mb-4">
                <a href="../index.html" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium">
                    <span class="mr-2">‚Üê</span> Back to Main
                </a>
            </div>
            <h1 class="text-4xl font-bold text-slate-800">Texas Transportation Code</h1>
            <p class="text-slate-600 mt-2">Study Guide for Law Enforcement</p>
        </header>

        <main class="space-y-8">
            <!-- Section 1: Overview -->
            <section id="overview" class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Transportation Code Overview</h2>
                <p class="mb-4">The Texas Transportation Code regulates the operation of vehicles and traffic safety. Understanding these laws is essential for law enforcement officers conducting traffic stops, investigations, and ensuring public safety.</p>
                <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                    <h4 class="font-bold text-blue-800">Key Areas Covered</h4>
                    <ul class="list-disc list-inside mt-2 text-sm space-y-1">
                        <li>Vehicle Registration and Licensing</li>
                        <li>Traffic Safety and Rules of the Road</li>
                        <li>Commercial Vehicle Regulations</li>
                        <li>Driver License Requirements</li>
                        <li>Equipment Standards</li>
                        <li>Enforcement Procedures</li>
                    </ul>
                </div>
            </section>

            <!-- Section 2: Traffic Violations -->
            <section id="violations" class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Common Traffic Violations</h2>
                
                <div class="space-y-4">
                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Speeding Violations</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Basic Speed Law:</strong> No person shall drive at a speed greater than is reasonable and prudent</li>
                                <li><strong>Posted Speed Limits:</strong> Must not exceed posted maximum speed limits</li>
                                <li><strong>School Zones:</strong> Reduced speed limits during school hours</li>
                                <li><strong>Construction Zones:</strong> Reduced speed limits with increased penalties</li>
                                <li><strong>Penalty Range:</strong> Fine amounts vary by speed over limit and location</li>
                            </ul>
                        </div>
                    </details>

                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Right of Way Violations</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Intersection Control:</strong> Stop signs, yield signs, and traffic signals</li>
                                <li><strong>Pedestrian Right of Way:</strong> Crosswalks and pedestrian signals</li>
                                <li><strong>Emergency Vehicles:</strong> Must yield to emergency vehicles with active signals</li>
                                <li><strong>School Buses:</strong> Must stop for school buses with extended stop sign</li>
                                <li><strong>Funeral Processions:</strong> Right of way for funeral processions</li>
                            </ul>
                        </div>
                    </details>

                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Equipment Violations</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Headlights:</strong> Required from sunset to sunrise and in poor visibility</li>
                                <li><strong>Taillights and Brake Lights:</strong> Must be visible from specified distances</li>
                                <li><strong>Turn Signals:</strong> Required for lane changes and turns</li>
                                <li><strong>Mirrors:</strong> Rearview mirror and side mirrors requirements</li>
                                <li><strong>Windshield:</strong> Must be free from obstructions and damage</li>
                            </ul>
                        </div>
                    </details>
                </div>
            </section>

            <!-- Section 3: Driver License Requirements -->
            <section id="licensing" class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Driver License Requirements</h2>
                
                <div class="space-y-4">
                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">License Classes</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Class A:</strong> Commercial vehicles over 26,000 lbs with trailer over 10,000 lbs</li>
                                <li><strong>Class B:</strong> Commercial vehicles over 26,000 lbs without large trailer</li>
                                <li><strong>Class C:</strong> Regular passenger vehicles and small trucks</li>
                                <li><strong>Class M:</strong> Motorcycles and motor-driven cycles</li>
                                <li><strong>Learner's Permit:</strong> Supervised driving for new drivers</li>
                            </ul>
                        </div>
                    </details>

                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">License Restrictions</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Age Restrictions:</strong> Various restrictions for drivers under 18</li>
                                <li><strong>Medical Restrictions:</strong> Vision, hearing, or mobility restrictions</li>
                                <li><strong>Conviction Restrictions:</strong> DWI ignition interlock requirements</li>
                                <li><strong>Occupational License:</strong> Limited driving privileges during suspension</li>
                                <li><strong>Endorsements:</strong> Required for hazmat, passenger, or school bus</li>
                            </ul>
                        </div>
                    </details>
                </div>
            </section>

            <!-- Section 4: Vehicle Registration -->
            <section id="registration" class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Vehicle Registration</h2>
                
                <div class="space-y-4">
                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Registration Requirements</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Annual Registration:</strong> Must be renewed annually by owner's birthday</li>
                                <li><strong>Registration Receipt:</strong> Must be carried in vehicle at all times</li>
                                <li><strong>License Plates:</strong> Must be properly displayed and current</li>
                                <li><strong>Registration Sticker:</strong> Must be affixed to license plate</li>
                                <li><strong>Insurance:</strong> Must maintain minimum liability insurance</li>
                            </ul>
                        </div>
                    </details>

                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Special Registration Types</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Temporary Tags:</strong> Paper tags for newly purchased vehicles</li>
                                <li><strong>Dealer Tags:</strong> For vehicles at dealerships</li>
                                <li><strong>Antique Vehicles:</strong> Special plates for vehicles over 25 years old</li>
                                <li><strong>Disabled Veteran:</strong> Special plates for disabled veterans</li>
                                <li><strong>Commercial Vehicles:</strong> Different requirements for commercial use</li>
                            </ul>
                        </div>
                    </details>
                </div>
            </section>

            <!-- Section 5: Traffic Enforcement -->
            <section id="enforcement" class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Traffic Enforcement Procedures</h2>
                
                <div class="space-y-4">
                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Traffic Stop Procedures</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Officer Safety:</strong> Proper positioning and approach techniques</li>
                                <li><strong>Documentation:</strong> Required information for citations</li>
                                <li><strong>Driver Interaction:</strong> Professional communication and explanation</li>
                                <li><strong>Vehicle Search:</strong> Circumstances allowing search of vehicle</li>
                                <li><strong>Arrest Procedures:</strong> When arrest is warranted for traffic violations</li>
                            </ul>
                        </div>
                    </details>

                    <details class="border border-slate-200 rounded-lg">
                        <summary class="bg-slate-50 p-4 font-semibold">Citation Procedures</summary>
                        <div class="p-4 border-t text-sm">
                            <ul class="space-y-2">
                                <li><strong>Written Promise:</strong> Driver's signature on citation</li>
                                <li><strong>Court Information:</strong> Date, time, and location details</li>
                                <li><strong>Violation Description:</strong> Clear description of the violation</li>
                                <li><strong>Officer Information:</strong> Badge number and department</li>
                                <li><strong>Copy Distribution:</strong> Proper distribution of citation copies</li>
                            </ul>
                        </div>
                    </details>
                </div>
            </section>

            <!-- Interactive Quiz Section -->
            <section id="interactive-quiz" class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-4 text-slate-700">Interactive Quiz: Transportation Code</h2>
                <p class="mb-6 text-slate-600">Test your knowledge of Texas Transportation Code violations, licensing requirements, and enforcement procedures.</p>
                
                <div id="quiz-container" class="space-y-6">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-sm text-slate-600">
                            Question <span id="current-question">1</span> of <span id="total-questions">8</span>
                        </div>
                        <div class="text-sm text-slate-600">
                            Score: <span id="current-score">0</span>/<span id="questions-answered">0</span>
                        </div>
                    </div>
                    
                    <div class="w-full bg-slate-200 rounded-full h-2 mb-6">
                        <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    
                    <div id="question-container" class="p-6 bg-slate-50 rounded-lg">
                        <!-- Questions will be populated by JavaScript -->
                    </div>
                    
                    <div id="explanation-container" class="hidden p-4 rounded-lg">
                        <!-- Explanations will be shown after each answer -->
                    </div>
                    
                    <div class="flex justify-between">
                        <button id="prev-btn" class="px-4 py-2 bg-slate-500 text-white rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Previous
                        </button>
                        <button id="next-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Next Question
                        </button>
                    </div>
                    
                    <div id="quiz-results" class="hidden p-6 bg-slate-50 rounded-lg text-center">
                        <h3 class="text-xl font-bold mb-4">Quiz Complete!</h3>
                        <div id="final-score" class="text-3xl font-bold text-blue-600 mb-4"></div>
                        <div id="performance-message" class="text-slate-600 mb-4"></div>
                        <button id="restart-quiz" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            Retake Quiz
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Quiz Data for Transportation Code
        const trafficQuizData = [
            {
                question: "When must headlights be used?",
                options: [
                    "Only at night",
                    "From sunset to sunrise and in poor visibility",
                    "Only in bad weather",
                    "Only on highways"
                ],
                correct: 1,
                explanation: "Headlights must be used from sunset to sunrise and during times of poor visibility such as rain, fog, or other weather conditions that impair visibility."
            },
            {
                question: "What is the basic speed law?",
                options: [
                    "Always drive the posted speed limit",
                    "Drive faster than traffic flow",
                    "Drive at a speed that is reasonable and prudent",
                    "Drive as fast as possible"
                ],
                correct: 2,
                explanation: "The basic speed law requires drivers to drive at a speed that is reasonable and prudent under the existing conditions, regardless of posted speed limits."
            },
            {
                question: "When must you stop for a school bus?",
                options: [
                    "Only if children are present",
                    "When the stop sign is extended and red lights are flashing",
                    "Only on two-lane roads",
                    "Only during school hours"
                ],
                correct: 1,
                explanation: "You must stop for a school bus when its stop sign is extended and red lights are flashing, regardless of the time of day or presence of children."
            },
            {
                question: "What class license is required for most passenger vehicles?",
                options: [
                    "Class A",
                    "Class B",
                    "Class C",
                    "Class M"
                ],
                correct: 2,
                explanation: "A Class C license is required for most passenger vehicles and small trucks under 26,000 lbs."
            },
            {
                question: "How often must vehicle registration be renewed?",
                options: [
                    "Every 6 months",
                    "Annually by the owner's birthday",
                    "Every 2 years",
                    "When the vehicle is sold"
                ],
                correct: 1,
                explanation: "Vehicle registration must be renewed annually by the owner's birthday month."
            },
            {
                question: "What is required for a valid traffic stop?",
                options: [
                    "Reasonable suspicion of criminal activity",
                    "Probable cause of a crime",
                    "Reasonable suspicion of a traffic violation",
                    "A warrant"
                ],
                correct: 2,
                explanation: "A traffic stop requires reasonable suspicion that a traffic violation has occurred or is occurring."
            },
            {
                question: "When can an officer search a vehicle during a traffic stop?",
                options: [
                    "Any time during a traffic stop",
                    "Only with a warrant",
                    "With consent, probable cause, or exigent circumstances",
                    "Only after an arrest"
                ],
                correct: 2,
                explanation: "An officer can search a vehicle with the driver's consent, probable cause to believe evidence of a crime is present, or under exigent circumstances."
            },
            {
                question: "What must be carried in a vehicle at all times?",
                options: [
                    "Only driver's license",
                    "Driver's license and registration",
                    "Driver's license, registration, and proof of insurance",
                    "Only proof of insurance"
                ],
                correct: 2,
                explanation: "Texas law requires drivers to carry a valid driver's license, current vehicle registration, and proof of insurance at all times while driving."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let userAnswers = [];

        function initQuiz() {
            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            document.getElementById('current-question').textContent = '1';
            document.getElementById('total-questions').textContent = trafficQuizData.length;
            document.getElementById('current-score').textContent = '0';
            document.getElementById('questions-answered').textContent = '0';
            document.getElementById('progress-bar').style.width = '0%';
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('explanation-container').classList.add('hidden');
            document.getElementById('next-btn').disabled = true;
            document.getElementById('prev-btn').disabled = true;
            showQuestion();
        }

        function showQuestion() {
            const question = trafficQuizData[currentQuestion];
            const container = document.getElementById('question-container');
            
            container.innerHTML = `
                <h3 class="text-lg font-semibold mb-4">${question.question}</h3>
                <div class="space-y-2">
                    ${question.options.map((option, index) => `
                        <label class="flex items-center p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer">
                            <input type="radio" name="answer" value="${index}" class="mr-3" onchange="selectAnswer(${index})">
                            <span>${option}</span>
                        </label>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('current-question').textContent = currentQuestion + 1;
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            
            // Restore previous answer if exists
            if (userAnswers[currentQuestion] !== undefined) {
                const radio = document.querySelector(`input[value="${userAnswers[currentQuestion]}"]`);
                if (radio) radio.checked = true;
                document.getElementById('next-btn').disabled = false;
            }
        }

        function selectAnswer(answerIndex) {
            userAnswers[currentQuestion] = answerIndex;
            document.getElementById('next-btn').disabled = false;
            
            // Show explanation
            const question = trafficQuizData[currentQuestion];
            const isCorrect = answerIndex === question.correct;
            const explanationContainer = document.getElementById('explanation-container');
            
            explanationContainer.innerHTML = `
                <div class="p-4 rounded-lg ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'} border">
                    <p class="font-semibold ${isCorrect ? 'text-green-800' : 'text-red-800'}">${isCorrect ? 'Correct!' : 'Incorrect'}</p>
                    <p class="text-sm mt-1">${question.explanation}</p>
                </div>
            `;
            explanationContainer.classList.remove('hidden');
        }

        function nextQuestion() {
            if (currentQuestion < trafficQuizData.length - 1) {
                currentQuestion++;
                document.getElementById('explanation-container').classList.add('hidden');
                document.getElementById('next-btn').disabled = true;
                showQuestion();
                updateProgress();
            } else {
                finishQuiz();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                document.getElementById('explanation-container').classList.add('hidden');
                document.getElementById('next-btn').disabled = userAnswers[currentQuestion] === undefined;
                showQuestion();
                updateProgress();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / trafficQuizData.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function finishQuiz() {
            // Calculate score
            score = 0;
            trafficQuizData.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    score++;
                }
            });
            
            // Show results
            document.getElementById('question-container').style.display = 'none';
            document.getElementById('explanation-container').style.display = 'none';
            document.querySelector('.flex.justify-between').style.display = 'none';
            
            const percentage = Math.round((score / trafficQuizData.length) * 100);
            document.getElementById('final-score').textContent = `${score}/${trafficQuizData.length} (${percentage}%)`;
            
            let message = '';
            if (percentage >= 90) {
                message = 'Excellent! You have a strong understanding of traffic law.';
            } else if (percentage >= 80) {
                message = 'Good job! You have a solid grasp of traffic enforcement.';
            } else if (percentage >= 70) {
                message = 'Not bad! Consider reviewing the material for better understanding.';
            } else {
                message = 'Keep studying! Understanding traffic law is crucial for effective enforcement.';
            }
            
            document.getElementById('performance-message').textContent = message;
            document.getElementById('quiz-results').classList.remove('hidden');
            
            // Update progress bar to 100%
            document.getElementById('progress-bar').style.width = '100%';
            document.getElementById('current-score').textContent = score;
            document.getElementById('questions-answered').textContent = trafficQuizData.length;
        }

        function restartQuiz() {
            document.getElementById('question-container').style.display = 'block';
            document.querySelector('.flex.justify-between').style.display = 'flex';
            initQuiz();
        }

        // Event listeners
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('prev-btn').addEventListener('click', prevQuestion);
        document.getElementById('restart-quiz').addEventListener('click', restartQuiz);

        // Initialize quiz on page load
        initQuiz();
    </script>
</body>
</html>
